# Refund Processing Example
# This example demonstrates various refund workflows

# Step 1: Create Charge
create_charge_request:
  method: POST
  url: https://api.registryaccord.com/payments/v1/payments/charges
  headers:
    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    RA-API-Version: "2025-11-01"
    Idempotency-Key: 550e8400-e29b-41d4-a716-446655440004
    Content-Type: application/json
  body:
    amount: 2999
    currency: "USD"
    payment_intent_id: "123e4567-e89b-12d3-a456-426614174011"
    metadata:
      product_id: "membership_premium"
      product_name: "Premium Membership"

create_charge_response:
  status: 201
  headers:
    X-RateLimit-Limit: 1000
    X-RateLimit-Remaining: 999
    X-RateLimit-Reset: 3600
    RA-API-Version: "2025-11-01"
    X-Correlation-ID: 550e8400-e29b-41d4-a716-446655440004
  body:
    data:
      id: "123e4567-e89b-12d3-a456-426614174012"
      payment_intent_id: "123e4567-e89b-12d3-a456-426614174011"
      amount: 2999
      currency: "USD"
      status: "AUTHORIZED"
      created_at: "2025-11-01T10:00:00Z"

# Step 2: Capture Charge
capture_charge_request:
  method: POST
  url: https://api.registryaccord.com/payments/v1/payments/charges/123e4567-e89b-12d3-a456-426614174012/capture
  headers:
    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    RA-API-Version: "2025-11-01"

capture_charge_response:
  status: 200
  headers:
    X-RateLimit-Limit: 1000
    X-RateLimit-Remaining: 998
    X-RateLimit-Reset: 3600
    RA-API-Version: "2025-11-01"
    X-Correlation-ID: 550e8400-e29b-41d4-a716-446655440005
  body:
    data:
      id: "123e4567-e89b-12d3-a456-426614174012"
      payment_intent_id: "123e4567-e89b-12d3-a456-426614174011"
      amount: 2999
      currency: "USD"
      status: "CAPTURED"
      captured_at: "2025-11-01T10:00:05Z"
      created_at: "2025-11-01T10:00:00Z"

# Step 3: Full Refund
full_refund_request:
  method: POST
  url: https://api.registryaccord.com/payments/v1/payments/charges/123e4567-e89b-12d3-a456-426614174012/refund
  headers:
    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    RA-API-Version: "2025-11-01"
    Content-Type: application/json
  body: {}

full_refund_response:
  status: 200
  headers:
    X-RateLimit-Limit: 1000
    X-RateLimit-Remaining: 997
    X-RateLimit-Reset: 3600
    RA-API-Version: "2025-11-01"
    X-Correlation-ID: 550e8400-e29b-41d4-a716-446655440006
  body:
    data:
      id: "123e4567-e89b-12d3-a456-426614174012"
      payment_intent_id: "123e4567-e89b-12d3-a456-426614174011"
      amount: 2999
      amount_refunded: 2999
      currency: "USD"
      status: "REFUNDED"
      captured_at: "2025-11-01T10:00:05Z"
      created_at: "2025-11-01T10:00:00Z"

# Step 4: Partial Refund Scenario
create_charge_2_request:
  method: POST
  url: https://api.registryaccord.com/payments/v1/payments/charges
  headers:
    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    RA-API-Version: "2025-11-01"
    Idempotency-Key: 550e8400-e29b-41d4-a716-446655440005
    Content-Type: application/json
  body:
    amount: 9999
    currency: "USD"
    payment_intent_id: "123e4567-e89b-12d3-a456-426614174013"
    metadata:
      product_id: "annual_subscription"
      product_name: "Annual Subscription"

create_charge_2_response:
  status: 201
  headers:
    X-RateLimit-Limit: 1000
    X-RateLimit-Remaining: 996
    X-RateLimit-Reset: 3600
    RA-API-Version: "2025-11-01"
    X-Correlation-ID: 550e8400-e29b-41d4-a716-446655440007
  body:
    data:
      id: "123e4567-e89b-12d3-a456-426614174014"
      payment_intent_id: "123e4567-e89b-12d3-a456-426614174013"
      amount: 9999
      currency: "USD"
      status: "AUTHORIZED"
      created_at: "2025-11-01T10:05:00Z"

# Step 5: Capture Second Charge
capture_charge_2_request:
  method: POST
  url: https://api.registryaccord.com/payments/v1/payments/charges/123e4567-e89b-12d3-a456-426614174014/capture
  headers:
    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    RA-API-Version: "2025-11-01"

capture_charge_2_response:
  status: 200
  headers:
    X-RateLimit-Limit: 1000
    X-RateLimit-Remaining: 995
    X-RateLimit-Reset: 3600
    RA-API-Version: "2025-11-01"
    X-Correlation-ID: 550e8400-e29b-41d4-a716-446655440008
  body:
    data:
      id: "123e4567-e89b-12d3-a456-426614174014"
      payment_intent_id: "123e4567-e89b-12d3-a456-426614174013"
      amount: 9999
      currency: "USD"
      status: "CAPTURED"
      captured_at: "2025-11-01T10:05:05Z"
      created_at: "2025-11-01T10:05:00Z"

# Step 6: Partial Refund
partial_refund_request:
  method: POST
  url: https://api.registryaccord.com/payments/v1/payments/charges/123e4567-e89b-12d3-a456-426614174014/refund
  headers:
    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    RA-API-Version: "2025-11-01"
    Content-Type: application/json
  body:
    amount: 2500
    reason: "Customer requested partial refund for unused service period"

partial_refund_response:
  status: 200
  headers:
    X-RateLimit-Limit: 1000
    X-RateLimit-Remaining: 994
    X-RateLimit-Reset: 3600
    RA-API-Version: "2025-11-01"
    X-Correlation-ID: 550e8400-e29b-41d4-a716-446655440009
  body:
    data:
      id: "123e4567-e89b-12d3-a456-426614174014"
      payment_intent_id: "123e4567-e89b-12d3-a456-426614174013"
      amount: 9999
      amount_refunded: 2500
      currency: "USD"
      status: "PARTIALLY_REFUNDED"
      captured_at: "2025-11-01T10:05:05Z"
      created_at: "2025-11-01T10:05:00Z"

# Step 7: Check Charge Status After Partial Refund
get_charge_request:
  method: GET
  url: https://api.registryaccord.com/payments/v1/payments/charges/123e4567-e89b-12d3-a456-426614174014
  headers:
    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    RA-API-Version: "2025-11-01"

get_charge_response:
  status: 200
  headers:
    X-RateLimit-Limit: 1000
    X-RateLimit-Remaining: 993
    X-RateLimit-Reset: 3600
    RA-API-Version: "2025-11-01"
    X-Correlation-ID: 550e8400-e29b-41d4-a716-446655440010
  body:
    data:
      id: "123e4567-e89b-12d3-a456-426614174014"
      payment_intent_id: "123e4567-e89b-12d3-a456-426614174013"
      amount: 9999
      amount_refunded: 2500
      currency: "USD"
      status: "PARTIALLY_REFUNDED"
      captured_at: "2025-11-01T10:05:05Z"
      created_at: "2025-11-01T10:05:00Z"

# Step 8: Refund Disputed Amount
refund_disputed_request:
  method: POST
  url: https://api.registryaccord.com/payments/v1/payments/charges/123e4567-e89b-12d3-a456-426614174014/refund
  headers:
    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    RA-API-Version: "2025-11-01"
    Content-Type: application/json
  body:
    amount: 1250
    reason: "Refund for disputed transaction resolution"

refund_disputed_response:
  status: 200
  headers:
    X-RateLimit-Limit: 1000
    X-RateLimit-Remaining: 992
    X-RateLimit-Reset: 3600
    RA-API-Version: "2025-11-01"
    X-Correlation-ID: 550e8400-e29b-41d4-a716-446655440011
  body:
    data:
      id: "123e4567-e89b-12d3-a456-426614174014"
      payment_intent_id: "123e4567-e89b-12d3-a456-426614174013"
      amount: 9999
      amount_refunded: 3750
      currency: "USD"
      status: "PARTIALLY_REFUNDED"
      captured_at: "2025-11-01T10:05:05Z"
      created_at: "2025-11-01T10:05:00Z"
