test_suite: "Payments Service - Dispute Handling"
version: "1.0.0"
tests:
  - name: "File Dispute for Revenue Split"
    description: "File a dispute for a contested revenue split"
    steps:
      - request:
          method: POST
          path: /v1/disputes
          headers:
            Authorization: "Bearer test-jwt-token"
          body:
            payment_id: "payment-123"
            reason: "incorrect_split"
            description: "Creator claims incorrect revenue split applied"
            evidence:
              - type: "screenshot"
                url: "https://example.com/evidence.png"
        expected_response:
          status: 201
          body:
            data:
              id: "^[a-zA-Z0-9-]+$"
              payment_id: "payment-123"
              reason: "incorrect_split"
              status: "open"
              filed_by_did: "did:ra:creator-123"
              filed_at: "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"

  - name: "Resolve Dispute in Favor of Creator"
    description: "Resolve a dispute in favor of the content creator"
    steps:
      - request:
          method: POST
          path: /v1/disputes/{dispute_id}/resolve
          headers:
            Authorization: "Bearer test-jwt-token"
          body:
            resolution: "creator_favored"
            notes: "Evidence supports creator's claim"
        expected_response:
          status: 200
          body:
            data:
              id: "^[a-zA-Z0-9-]+$"
              status: "resolved"
              resolution: "creator_favored"
              resolved_at: "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"
